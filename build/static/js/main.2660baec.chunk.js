(window["webpackJsonppuhelinluettelo-frontend"]=window["webpackJsonppuhelinluettelo-frontend"]||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n.n(l),r=n(13),o=n.n(r),i=n(14),c=n(2),u=n(3),d=n.n(u),m="/api/persons",f=function(){return d.a.get(m).then(function(e){return e.data})},s=function(e){return d.a.post(m,e).then(function(e){return e.data})},v=function(e){return d.a.put(m,e).then(function(e){return e.data})},b=function(e){return d.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},g=function(e){return a.a.createElement("div",null,"filter shown with:",a.a.createElement("input",{onChange:e.changeHandler,value:e.value}))},h=function(e){return a.a.createElement("form",null,a.a.createElement("div",null,"name:",a.a.createElement("input",{onChange:e.changeNameHandler,value:e.name})),a.a.createElement("div",null,"number:",a.a.createElement("input",{onChange:e.changeNumberHandler,value:e.number})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:e.submitClickHandler},"add")))},p=function(e){return a.a.createElement("ul",{style:{listStyleType:"none",padding:0}},e.persons.filter(function(t){return t.name.toLocaleUpperCase().includes(e.filter)}).map(function(t){return a.a.createElement("li",{key:t.name},t.name," ",t.number,"\xa0",a.a.createElement(E,{id:t.id,deleteClickHandler:e.deleteClickHandler}))}))},E=function(e){return a.a.createElement("button",{id:e.id,onClick:e.deleteClickHandler},"delete")},w=function(e){var t=e.notification,n=[{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"lightgrey",color:"green",fontStyle:"normal",fontSize:20},{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"grey",color:"blue",fontStyle:"italics",fontSize:20},{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"darkgrey",color:"salmon",fontStyle:"bold",fontSize:20}];return t.level<0||t.level>=n.length?null:a.a.createElement("div",{className:"notification",style:n[t.level]},t.text)},y=function(){var e=Object(l.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(l.useState)(""),u=Object(c.a)(o,2),d=u[0],m=u[1],E=Object(l.useState)(""),y=Object(c.a)(E,2),k=y[0],C=y[1],S=Object(l.useState)(""),x=Object(c.a)(S,2),j=x[0],H=x[1],O=Object(l.useState)({level:-1}),T=Object(c.a)(O,2),N=T[0],B=T[1];return Object(l.useEffect)(function(){f().then(function(e){r(e.sort(function(e,t){return e.name>t.name}))}).catch(function(e){console.log(e),B({text:"Could not get person list from server",level:2}),setTimeout(function(){return B({level:-1})},15e3)})},[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(w,{notification:N}),a.a.createElement(g,{changeHandler:function(e){return H(e.target.value)},value:j}),a.a.createElement("h3",null,"add a new"),a.a.createElement(h,{changeNameHandler:function(e){return m(e.target.value)},name:d,changeNumberHandler:function(e){return C(e.target.value)},number:k,submitClickHandler:function(e){if(e.preventDefault(),!d||!k)return B({text:"Error, please fill in both name and number",level:1}),void setTimeout(function(){return B({level:-1})},1e4);var t=Object(i.a)(n),l=t.find(function(e){return e.name===d});if(void 0!==l){if(!window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?")))return B({text:"Cancelled updating '".concat(d,"'"),level:1}),void setTimeout(function(){return B({level:-1})},1e4);l.name=d,l.number=k,v(l).then(function(e){r(t.filter(function(t){return t.id===e.id?e:t}))}).catch(function(e){console.log(e),B({text:"Failed modifying '".concat(d,"'"),level:2}),setTimeout(function(){return B({level:-1})},15e3)}),B({text:"Updated '".concat(d,"'"),level:0})}else s({name:d,number:k}).then(function(e){r(t.concat(e))}).catch(function(e){console.log(e),B({text:"Failed creating '".concat(d,"'"),level:2}),setTimeout(function(){return B({level:-1})},15e3)}),B({text:"Added '".concat(d,"'"),level:0});m(""),C(""),setTimeout(function(){return B({level:-1})},5e3)}}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(p,{persons:n,filter:j.toLocaleUpperCase(),deleteClickHandler:function(e){var t=e.target.getAttribute("id"),l=n.find(function(e){return e.id===t});return null==t||void 0===l?(B({text:"Failed deleting person with id '".concat(t,"'"),level:2}),void setTimeout(function(){return B({level:-1})},15e3)):window.confirm("Delete ".concat(l.name,"?"))?(b(l.id).then(function(e){return r(n.filter(function(e){return e.id!==l.id}))}).catch(function(e){console.log(e),B({text:"Failed deleting '".concat(l.name,"' with id '").concat(l.id,"'"),level:2}),setTimeout(function(){return B({level:-1})},15e3)}),B({text:"Deleted '".concat(l.name,"'"),level:0}),void setTimeout(function(){return B({level:-1})},5e3)):(B({text:"Cancelling deletion of '".concat(l.name,"' with id '").concat(l.id,"'"),level:1}),void setTimeout(function(){return B({level:-1})},1e4))}}))};o.a.render(a.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2660baec.chunk.js.map