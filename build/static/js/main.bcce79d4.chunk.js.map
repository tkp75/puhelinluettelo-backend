{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","put","id","delete","util","require","Filter","props","onChange","changeHandler","value","PersonForm","changeNameHandler","name","changeNumberHandler","number","type","onClick","submitClickHandler","Persons","style","listStyleType","padding","persons","filter","person","toLocaleUpperCase","includes","map","key","deleteClickHandler","DeleteButton","Notification","notification","styleList","marginBottom","borderStyle","borderRadius","background","color","fontStyle","fontSize","level","length","className","text","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","message","setMessage","useEffect","personService","returnedPersons","sort","p1","p2","catch","error","errorText","request","JSON","stringify","stack","console","log","inspect","setTimeout","event","target","preventDefault","newPersons","parse","find","p","undefined","window","confirm","returnedPerson","concat","getAttribute","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bcce79d4.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson)\n  return request.then(response => response.data)\n}\n\nconst modify = (newPerson) => {\n  const request = axios.put(baseUrl, newPerson)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, modify, remove }","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nconst  util = require('util');\n\nconst Filter = (props) => {\n  return (\n    <div>\n      filter shown with:\n      <input\n        onChange={props.changeHandler}\n        value={props.value}\n      />\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return (\n    <form>\n      <div>\n        name:\n        <input\n          onChange={props.changeNameHandler}\n          value={props.name}\n        />\n      </div>\n      <div>\n        number:\n        <input\n          onChange={props.changeNumberHandler}\n          value={props.number}\n        />\n      </div>\n      <div>\n        <button\n          type=\"submit\"\n          onClick={props.submitClickHandler}\n        >\n          add\n        </button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = (props) => {\n  return (\n    <ul style={{listStyleType: \"none\", padding: 0}}>\n      {props.persons.filter(person => person.name.toLocaleUpperCase().includes(props.filter))\n        .map(person =>\n          <li key={person.name}>\n            {person.name} {person.number}&nbsp;\n            <DeleteButton id={person.id} deleteClickHandler={props.deleteClickHandler} />\n          </li>\n        )\n      }\n    </ul>\n  )\n}\n\nconst DeleteButton = (props) => {\n  return (\n    <button id={props.id} onClick={props.deleteClickHandler}>delete</button>\n  )\n}\n\nconst Notification = ({notification}) => {\n  const styleList = [\n    { // INFO\n      padding: 10,\n      marginBottom: 10,\n      borderStyle: 'solid',\n      borderRadius: 5,\n      background: 'lightgrey',\n      color: 'green',\n      fontStyle: 'normal',\n      fontSize: 20\n    },\n    { // WARN\n      padding: 10,\n      marginBottom: 10,\n      borderStyle: 'solid',\n      borderRadius: 5,\n      background: 'grey',\n      color: 'blue',\n      fontStyle: 'italics',\n      fontSize: 20\n    },\n    { // ERROR\n      padding: 10,\n      marginBottom: 10,\n      borderStyle: 'solid',\n      borderRadius: 5,\n      background: 'darkblue',\n      color: 'salmon',\n      fontStyle: 'bold',\n      fontSize: 20\n    }\n  ]\n  if (notification.level < 0 || notification.level >= styleList.length) {\n    return null\n  }\n  return (\n    <div className=\"notification\" style={styleList[notification.level]}>\n      <pre>{notification.text}</pre>\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ message, setMessage ] = useState({level: -1})\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleFilterChange = (event) => setNewFilter(event.target.value)\n\n  const handleSubmitClick = (event) => {\n    event.preventDefault()\n/* commented out to test validation on backend\n    if (!newName || !newNumber) {\n      setMessage({text: `Error, please fill in both name and number`, level: 2})\n      setTimeout(() => setMessage({level: -1}), 15000)\n      return\n    } \n*/\n    const newPersons = JSON.parse(JSON.stringify(persons))\n    const person = newPersons.find(p => p.name === newName)\n    if (person !== undefined) {\n      // Modify person if already exist and user agrees, cancel operation otherwise\n      if (!window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        setMessage({text: `Cancelled updating '${newName}'`, level: 1})\n        setTimeout(() => setMessage({level: -1}), 10000)\n        return\n      }\n      person.name = newName\n      person.number = newNumber\n      personService.modify(person)\n        .then(returnedPerson => {\n          setPersons(newPersons.filter(p => {\n            if (p.id === returnedPerson.id) return returnedPerson\n            return p\n          }))})\n        .then(returnedPerson => {\n          setMessage({text: `Updated '${newName}'`, level: 0})\n          setTimeout(() => setMessage({level: -1}), 5000)\n        })\n        .catch(error => {\n          let errorText\n          if (error.response) errorText = error.response.data.error\n          else if (error.request) errorText = JSON.stringify(error.request.data, null, 2)\n          else errorText = error.stack\n          console.log(`Failed modifying '${newName}':`,util.inspect(error))\n          setMessage({text: `Failed modifying '${newName}'\\n${error.message}\\n${errorText}`, level: 2})\n          setTimeout(() => setMessage({level: -1}), 15000)\n          return\n        })    \n    } else {\n      // Create a new user with a number\n      personService.create({ name: newName, number: newNumber })\n        .then(returnedPerson => setPersons(newPersons.concat(returnedPerson)))\n        .then(returnedPerson => {\n          setMessage({text: `Added '${newName}'`, level: 0})\n          setTimeout(() => setMessage({level: -1}), 5000)\n        })\n        .catch(error => {\n          let errorText\n          if (error.response) errorText = error.response.data.error\n          else if (error.request) errorText = JSON.stringify(error.request.data)\n          else errorText = error.stack\n          console.log(`Failed creating '${newName}':`,util.inspect(error))\n          setMessage({text: `Failed creating '${newName}'\\n${error.message}\\n${errorText}`, level: 2})\n          setTimeout(() => setMessage({level: -1}), 15000)\n          return\n        })\n      }\n    setNewName('')\n    setNewNumber('')\n}\n\n  const handleDeleteClick = (event) => {\n    const id = event.target.getAttribute('id')\n    const person = persons.find(person => person.id === id)\n/* commented out to test validation on backend\n    if (id == null || person === undefined) {\n      setMessage({text: `Failed deleting person with id '${id}'`, level: 2})\n      setTimeout(() => setMessage({level: -1}), 15000)\n      return\n    }\n*/\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService.remove(person.id)\n        .then(returnedPerson => setPersons(persons.filter(p => p.id !== person.id)))\n        .then(returnedPerson => {\n          setMessage({text: `Deleted '${person.name}' with id '${person.id}'`,level: 0})\n          setTimeout(() => setMessage({level: -1}), 5000)\n        })\n        .catch(error => {\n          let errorText\n          if (error.response) errorText = error.response.data.error\n          else if (error.request) errorText = JSON.stringify(error.request.data)\n          else errorText = error.stack\n          console.log(`Failed deleting '${person.name}' with id '${person.id}':`,util.inspect(error))\n          setMessage({text: `Failed deleting '${person.name}' with id '${person.id}'\\n${errorText}`,\n            level: 2})\n          setTimeout(() => setMessage({level: -1}), 15000)\n          return\n        })\n    } else {\n      setMessage({text: `Cancelling deletion of '${person.name}' with id '${person.id}'`, level: 1})\n      setTimeout(() => setMessage({level: -1}), 10000)\n      return\n    }\n  }\n\n  useEffect(() => {\n    personService.getAll()\n      .then(returnedPersons => {\n        setPersons(returnedPersons.sort((p1, p2) => p1.name > p2.name))\n      })\n      .catch(error => {\n        let errorText\n        if (error.response) errorText = error.response.data.error\n        else if (error.request) errorText = JSON.stringify(error.request.data)\n        else errorText = error.stack\n        console.log(`Could not get person list from server:`,util.inspect(error))\n        setMessage({text: `Could not get person list from server\\n${errorText}`, level: 2})\n        setTimeout(() => setMessage({level: -1}), 15000)\n      })      \n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={message} />\n      <Filter\n        changeHandler={handleFilterChange}\n        value={newFilter}\n      />\n      <h3>add a new</h3>\n      <PersonForm\n        changeNameHandler={handleNameChange}\n        name={newName}\n        changeNumberHandler={handleNumberChange}\n        number={newNumber}\n        submitClickHandler={handleSubmitClick}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        filter={newFilter.toLocaleUpperCase()}\n        deleteClickHandler={handleDeleteClick}\n      />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}