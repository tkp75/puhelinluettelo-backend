(window["webpackJsonppuhelinluettelo-frontend"]=window["webpackJsonppuhelinluettelo-frontend"]||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n.n(l),r=n(13),o=n.n(r),i=n(14),c=n(2),u=n(3),d=n.n(u),m=function(){return d.a.get("/api/persons").then(function(e){return e.data})},f=function(e){return d.a.post("/api/persons",e).then(function(e){return e.data})},s=function(e){return d.a.delete("".concat("/api/persons","/").concat(e)).then(function(e){return e.data})},v=function(e){return a.a.createElement("div",null,"filter shown with:",a.a.createElement("input",{onChange:e.changeHandler,value:e.value}))},g=function(e){return a.a.createElement("form",null,a.a.createElement("div",null,"name:",a.a.createElement("input",{onChange:e.changeNameHandler,value:e.name})),a.a.createElement("div",null,"number:",a.a.createElement("input",{onChange:e.changeNumberHandler,value:e.number})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:e.submitClickHandler},"add")))},b=function(e){return a.a.createElement("ul",{style:{listStyleType:"none",padding:0}},e.persons.filter(function(t){return t.name.toLocaleUpperCase().includes(e.filter)}).map(function(t){return a.a.createElement("li",{key:t.name},t.name," ",t.number,"\xa0",a.a.createElement(p,{id:t.id,deleteClickHandler:e.deleteClickHandler}))}))},p=function(e){return a.a.createElement("button",{id:e.id,onClick:e.deleteClickHandler},"delete")},h=function(e){var t=e.notification,n=[{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"lightgrey",color:"green",fontStyle:"normal",fontSize:20},{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"grey",color:"blue",fontStyle:"italics",fontSize:20},{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"darkgrey",color:"salmon",fontStyle:"bold",fontSize:20}];return t.level<0||t.level>=n.length?null:a.a.createElement("div",{className:"notification",style:n[t.level]},t.text)},E=function(){var e=Object(l.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(l.useState)(""),u=Object(c.a)(o,2),d=u[0],p=u[1],E=Object(l.useState)(""),w=Object(c.a)(E,2),k=w[0],y=w[1],C=Object(l.useState)(""),S=Object(c.a)(C,2),j=S[0],H=S[1],O=Object(l.useState)({level:-1}),x=Object(c.a)(O,2),T=x[0],N=x[1];return Object(l.useEffect)(function(){m().then(function(e){r(e)}).catch(function(e){console.log(e),N({text:"Could not get person list from server",level:2}),setTimeout(function(){return N({level:-1})},15e3)})},[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(h,{notification:T}),a.a.createElement(v,{changeHandler:function(e){return H(e.target.value)},value:j}),a.a.createElement("h3",null,"add a new"),a.a.createElement(g,{changeNameHandler:function(e){return p(e.target.value)},name:d,changeNumberHandler:function(e){return y(e.target.value)},number:k,submitClickHandler:function(e){e.preventDefault();var t=Object(i.a)(n),l=t.find(function(e){return e.name===d}),a="Added '".concat(d,"'");if(void 0!==l){if(!window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?")))return N({text:"Cancelled updating '".concat(d,"'"),level:1}),void setTimeout(function(){return N({level:-1})},1e4);s(l.id).catch(function(e){console.log(e),N({text:"Failed removing '".concat(d,"' during update"),level:2}),setTimeout(function(){return N({level:-1})},15e3)}),t=t.filter(function(e){return e.id!==l.id}),a="Updated '".concat(d,"'")}f({name:d,number:k}).then(function(e){r(t.concat(e))}).catch(function(e){console.log(e),N({text:"Failed creating '".concat(d,"'"),level:2}),r(t),setTimeout(function(){return N({level:-1})},15e3)}),N({text:a,level:0}),p(""),y(""),setTimeout(function(){return N({level:-1})},5e3)}}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(b,{persons:n,filter:j.toLocaleUpperCase(),deleteClickHandler:function(e){var t=parseInt(e.target.getAttribute("id"),10),l=n.find(function(e){return e.id===t});return isFinite(t)&&void 0!==l?window.confirm("Delete ".concat(l.name,"?"))?(s(l.id).then(function(e){return r(n.filter(function(e){return e.id!==l.id}))}).catch(function(e){console.log(e),N({text:"Failed deleting '".concat(l.name,"' with id '").concat(l.id,"'"),level:2}),setTimeout(function(){return N({level:-1})},15e3)}),N({text:"Deleted '".concat(l.name,"'"),level:0}),void setTimeout(function(){return N({level:-1})},5e3)):(N({text:"Cancelling deletion of '".concat(l.name,"' with id '").concat(l.id,"'"),level:1}),void setTimeout(function(){return N({level:-1})},1e4)):(N({text:"Failed deleting person with id '".concat(t,"'"),level:2}),void setTimeout(function(){return N({level:-1})},15e3))}}))};o.a.render(a.a.createElement(E,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5973948d.chunk.js.map