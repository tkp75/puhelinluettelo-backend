(window["webpackJsonppuhelinluettelo-frontend"]=window["webpackJsonppuhelinluettelo-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),o=n.n(l),c=n(15),i=n(2),u=n(3),d=n.n(u),s="/api/persons",f=function(){return d.a.get(s).then(function(e){return e.data})},m=function(e){return d.a.post(s,e).then(function(e){return e.data})},g=function(e){return d.a.put(s,e).then(function(e){return e.data})},v=function(e){return d.a.delete("".concat(s,"/").concat(e)).then(function(e){return e.data})},p=n(37),b=function(e){return r.a.createElement("div",null,"filter shown with:",r.a.createElement("input",{onChange:e.changeHandler,value:e.value}))},h=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"name:",r.a.createElement("input",{onChange:e.changeNameHandler,value:e.name})),r.a.createElement("div",null,"number:",r.a.createElement("input",{onChange:e.changeNumberHandler,value:e.number})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.submitClickHandler},"add")))},y=function(e){return r.a.createElement("ul",{style:{listStyleType:"none",padding:0}},e.persons.filter(function(t){return t.name.toLocaleUpperCase().includes(e.filter)}).map(function(t){return r.a.createElement("li",{key:t.name},t.name," ",t.number,"\xa0",r.a.createElement(E,{id:t.id,deleteClickHandler:e.deleteClickHandler}))}))},E=function(e){return r.a.createElement("button",{id:e.id,onClick:e.deleteClickHandler},"delete")},S=function(e){var t=e.notification,n=[{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"lightgrey",color:"green",fontStyle:"normal",fontSize:20},{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"grey",color:"blue",fontStyle:"italics",fontSize:20},{padding:10,marginBottom:10,borderStyle:"solid",borderRadius:5,background:"darkgrey",color:"salmon",fontStyle:"bold",fontSize:20}];return t.level<0||t.level>=n.length?null:r.a.createElement("div",{className:"notification",style:n[t.level]},r.a.createElement("pre",null,t.text))},k=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),d=u[0],s=u[1],E=Object(a.useState)(""),k=Object(i.a)(E,2),O=k[0],w=k[1],C=Object(a.useState)(""),N=Object(i.a)(C,2),j=N[0],H=N[1],x=Object(a.useState)({level:-1}),J=Object(i.a)(x,2),T=J[0],q=J[1];return Object(a.useEffect)(function(){f().then(function(e){l(e.sort(function(e,t){return e.name>t.name}))}).catch(function(e){var t;t=e.response?JSON.stringify(e.response.data):e.request?JSON.stringify(e.request.data):e.stack,console.log("Could not get person list from server:",p.inspect(e)),q({text:"Could not get person list from server\n".concat(t),level:2}),setTimeout(function(){return q({level:-1})},15e3)})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(S,{notification:T}),r.a.createElement(b,{changeHandler:function(e){return H(e.target.value)},value:j}),r.a.createElement("h3",null,"add a new"),r.a.createElement(h,{changeNameHandler:function(e){return s(e.target.value)},name:d,changeNumberHandler:function(e){return w(e.target.value)},number:O,submitClickHandler:function(e){e.preventDefault();var t=Object(c.a)(n),a=t.find(function(e){return e.name===d});if(void 0!==a){if(!window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?")))return q({text:"Cancelled updating '".concat(d,"'"),level:1}),void setTimeout(function(){return q({level:-1})},1e4);a.name=d,a.number=O,g(a).then(function(e){l(t.filter(function(t){return t.id===e.id?e:t}))}).catch(function(e){var t;t=e.response?JSON.stringify(e.response.data):e.request?JSON.stringify(e.request.data):e.stack,console.log("Failed modifying '".concat(d,"':"),p.inspect(e)),q({text:"Failed modifying '".concat(d,"'\n").concat(e.message,"\n").concat(t),level:2}),setTimeout(function(){return q({level:-1})},15e3)}),q({text:"Updated '".concat(d,"'"),level:0})}else m({name:d,number:O}).then(function(e){l(t.concat(e))}).catch(function(e){var t;t=e.response?JSON.stringify(e.response.data):e.request?JSON.stringify(e.request.data):e.stack,console.log("Failed creating '".concat(d,"':"),p.inspect(e)),q({text:"Failed creating '".concat(d,"'\n").concat(e.message,"\n").concat(t),level:2}),setTimeout(function(){return q({level:-1})},15e3)}),q({text:"Added '".concat(d,"'"),level:0});s(""),w(""),setTimeout(function(){return q({level:-1})},5e3)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(y,{persons:n,filter:j.toLocaleUpperCase(),deleteClickHandler:function(e){var t=e.target.getAttribute("id"),a=n.find(function(e){return e.id===t});if(!window.confirm("Delete ".concat(a.name,"?")))return q({text:"Cancelling deletion of '".concat(a.name,"' with id '").concat(a.id,"'"),level:1}),void setTimeout(function(){return q({level:-1})},1e4);v(a.id).then(function(e){return l(n.filter(function(e){return e.id!==a.id}))}).catch(function(e){var t;t=e.response?JSON.stringify(e.response.data):e.request?JSON.stringify(e.request.data):e.stack,console.log("Failed deleting '".concat(a.name,"' with id '").concat(a.id,"':"),p.inspect(e)),q({text:"Failed deleting '".concat(a.name,"' with id '").concat(a.id,"'\n").concat(t),level:2}),setTimeout(function(){return q({level:-1})},15e3)}),q({text:"Deleted '".concat(a.name,"'"),level:0}),setTimeout(function(){return q({level:-1})},5e3)}}))};o.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.8f825a83.chunk.js.map